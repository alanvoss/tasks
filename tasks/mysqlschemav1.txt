-- 
-- Created by SQL::Translator::Producer::MySQL
-- Created on Thu Sep  6 20:05:44 2012
-- 
SET foreign_key_checks=0;
-- Table: `categories`
--
CREATE TABLE `categories` (
  `category_id` integer NOT NULL auto_increment,
  `parent_id` integer,
  `category` VARCHAR(255) NOT NULL,
  INDEX `categories_idx_parent_id` (`parent_id`),
  PRIMARY KEY (`category_id`),
  CONSTRAINT `categories_fk_parent_id` FOREIGN KEY (`parent_id`) REFERENCES `categories` (`category_id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB;
-- Table: `users`
--
CREATE TABLE `users` (
  `user_id` integer NOT NULL auto_increment,
  `user` VARCHAR(100) NOT NULL,
  `secret` VARCHAR(255) NOT NULL,
  PRIMARY KEY (`user_id`)
) ENGINE=InnoDB;
-- Table: `tasks`
--
CREATE TABLE `tasks` (
  `task_id` integer NOT NULL auto_increment,
  `category_id` integer NOT NULL,
  `parent_id` integer,
  `user_id` integer NOT NULL,
  `task` VARCHAR(255) NOT NULL,
  INDEX `tasks_idx_category_id` (`category_id`),
  INDEX `tasks_idx_parent_id` (`parent_id`),
  INDEX `tasks_idx_user_id` (`user_id`),
  PRIMARY KEY (`task_id`),
  CONSTRAINT `tasks_fk_category_id` FOREIGN KEY (`category_id`) REFERENCES `categories` (`category_id`),
  CONSTRAINT `tasks_fk_parent_id` FOREIGN KEY (`parent_id`) REFERENCES `tasks` (`task_id`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `tasks_fk_user_id` FOREIGN KEY (`user_id`) REFERENCES `users` (`user_id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB;

SET foreign_key_checks=1;
